var metrics = require('./index.js');
metrics.init({ host: 'testbox', prefix: 'test.' });

function collectMemoryStats() {
    var memUsage = process.memoryUsage();
    metrics.gauge('memory.rss', memUsage.rss);
    metrics.gauge('memory.heapTotal', memUsage.heapTotal);
    metrics.gauge('memory.heapUsed', memUsage.heapUsed);
};

setInterval(collectMemoryStats, 5000);


// // Optional: Configure some defaults.
// metrics.setDefaultHost('myhost');
// metrics.setDefaultPrefix('myapp.');

// // Gauges keep the most recent value.
// metrics.gauge('test.cpu_usage', 32);

// // Counters ... count stuff.
// metrics.increment('test.num_requests');
// metrics.increment('test.num_requests', 2);

// // Histograms describe the distribution of the recorded values.
// metrics.histogram('test.service_time', 50);
// metrics.histogram('test.service_time', 100);

// // Wait for the auto-flush to kick in.
// setTimeout(function(){}, 20000);
